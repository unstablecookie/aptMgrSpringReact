{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'../components/Border.css';import'../components/input.css';import'../components/menu/buttons-small.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LogIn=props=>{const[name,setName]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const history=useNavigate();const handleLogin=async()=>{try{if(!name||!password){setError('Please enter both username and password.');return;}const response=await axios.post('/auth/signin',{name,password});console.log('Login successful:',response.data);props.apptoken(response.data.token);if(response.data.roles.some(role=>role==='ADMIN')){history('/dashboard/admin');}else{history('/dashboard');}}catch(error){console.error('Login failed:',error.response?error.response.data:error.message);setError('Invalid username or password.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"bord-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bord\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Please login\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"input\",{className:\"line\",placeholder:\"Name\",id:\"email\",value:name,type:\"name\",onChange:e=>setName(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"input\",{className:\"line\",placeholder:\"Password\",id:\"password\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"button\",{className:\"modern-small embossed-link-small\",onClick:handleLogin,children:\"Sign in\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Not a member? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Register\"})]})})]})});};export default LogIn;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","LogIn","props","name","setName","password","setPassword","error","setError","history","handleLogin","response","post","console","log","data","apptoken","token","roles","some","role","message","className","children","placeholder","id","value","type","onChange","e","target","onClick","href"],"sources":["D:/dev/code/java/aptMgrSpringReact/src/main/aptmgrfront/src/pages/LogIn.js"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport '../components/Border.css';\r\nimport '../components/input.css';\r\nimport '../components/menu/buttons-small.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst LogIn = props => {\r\n    const [name, setName] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const history = useNavigate();\r\n    const handleLogin = async () => {\r\n        try {\r\n            if (!name || !password) {\r\n                setError('Please enter both username and password.');\r\n                return;\r\n            }\r\n            const response = await axios.post('/auth/signin', { name, password });\r\n            console.log('Login successful:', response.data);\r\n            props.apptoken(response.data.token);\r\n            if (response.data.roles.some( (role) => role === 'ADMIN')) {\r\n                history('/dashboard/admin');\r\n            } else {\r\n                history('/dashboard');\r\n            }\r\n        } catch (error) {\r\n            console.error('Login failed:', error.response ? error.response.data : error.message);\r\n            setError('Invalid username or password.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className='bord-container'>\r\n            <div className='bord'>\r\n                    <div className=\"divborder\">\r\n                        <h2>Please login</h2>\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <input className='line' placeholder='Name' id='email' value={name} type='name' onChange={(e) => setName(e.target.value)} />\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <input className='line' placeholder='Password' id='password' type='password' value={password} onChange={(e) => setPassword(e.target.value)} />\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        {error && <p className=\"text-danger\">{error}</p>}\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <button className=\"modern-small embossed-link-small\" onClick={handleLogin}>Sign in</button>\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <p>Not a member? <a href=\"/signup\" >Register</a></p>\r\n                    </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LogIn;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}