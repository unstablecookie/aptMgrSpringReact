{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from\"axios\";import'../NewForm.css';import'../menu/buttons-small.css';import PostService from'../PostService';import PostImageService from'../PostImageService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewPropertyByOwner=props=>{const API_URL=\"/properties/owner\";const API_IMG_URL=\"/properties/image\";const[property,setProperty]=useState({title:\"\",propertyTypeId:1,buildIn:1,floorsNumb:1,sqrMeters:1,lastPayment:new Date().toISOString().replace('T',' ').substring(0,19),monthlyPaid:false});const currDate=new Date().toISOString().replace('T',' ').substring(0,19);const[msg,setMsg]=useState(\"\");const config={headers:{Authorization:`Bearer ${props.token}`}};const[getTypes,setGetTypes]=useState([]);const[selectedImage,setSelectedImage]=useState(null);const handleChange=e=>{const value=e.target.value;setProperty({...property,[e.target.name]:value});};const changeDate=e=>{const value=e.target.value.replace('T',' ');setProperty({...property,[e.target.name]:value});};const RegisterProperty=e=>{e.preventDefault();PostService.saveEntity(API_URL,property,config).then(res=>{console.log(\"Property Added Successfully\");setMsg(\"Property Added Sucessfully\");setProperty({title:\"\",propertyTypeId:1,buildIn:1,floorsNumb:1,sqrMeters:1,lastPayment:new Date().toISOString().replace('T',' ').substring(0,19),monthlyPaid:false});updateButton();UploadSelectedImage(res.data.id);}).catch(error=>{console.log(error);updateButton();});};const UploadSelectedImage=e=>{if(selectedImage===null){return;}const config_img={headers:{Authorization:`Bearer ${props.token}`,'Content-Type':'multipart/form-data','X-property-id':e}};PostImageService.saveEntity(API_IMG_URL,selectedImage,config_img).then(response=>{console.log(response.data);}).catch(error=>{console.log(error);});};const updateButton=()=>{props.hide(false);};useEffect(()=>{async function fetchTypes(params){const URL=\"/properties/types\";try{const response=await axios.get(URL,config);setGetTypes(response.data);}catch(error){console.log(error);}}fetchTypes();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:msg&&/*#__PURE__*/_jsx(\"p\",{children:msg})}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:e=>RegisterProperty(e),children:[/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:\"add new property\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"input\",{className:\"simple-input\",placeholder:\"enter property title\",name:\"title\",onChange:e=>handleChange(e),value:property.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"simple-input\",name:\"propertyTypeId\",onChange:e=>handleChange(e),value:property.propertyTypeId,children:[getTypes.map((type,i)=>/*#__PURE__*/_jsx(\"option\",{value:type.id,children:type.type},i)),\";\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"input\",{className:\"simple-input\",placeholder:\"build in\",name:\"buildIn\",onChange:e=>handleChange(e)})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"input\",{className:\"simple-input\",placeholder:\"floors number\",name:\"floorsNumb\",onChange:e=>handleChange(e)})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"input\",{className:\"simple-input\",placeholder:\"sqr meters\",name:\"sqrMeters\",onChange:e=>handleChange(e)})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",name:\"lastPayment\",step:\"1\",defaultValue:currDate,onChange:e=>changeDate(e)})}),/*#__PURE__*/_jsx(\"div\",{className:\"divborder\",children:/*#__PURE__*/_jsx(\"input\",{className:\"simple-input\",type:\"file\",name:\"myImage\",onChange:e=>{setSelectedImage(e.target.files[0]);}})}),/*#__PURE__*/_jsx(\"button\",{className:\"modern-small embossed-link-small\",type:\"submit\",children:\"Submit\"})]})]})]});};export default NewPropertyByOwner;","map":{"version":3,"names":["React","useEffect","useState","axios","PostService","PostImageService","jsx","_jsx","jsxs","_jsxs","NewPropertyByOwner","props","API_URL","API_IMG_URL","property","setProperty","title","propertyTypeId","buildIn","floorsNumb","sqrMeters","lastPayment","Date","toISOString","replace","substring","monthlyPaid","currDate","msg","setMsg","config","headers","Authorization","token","getTypes","setGetTypes","selectedImage","setSelectedImage","handleChange","e","value","target","name","changeDate","RegisterProperty","preventDefault","saveEntity","then","res","console","log","updateButton","UploadSelectedImage","data","id","catch","error","config_img","response","hide","fetchTypes","params","URL","get","children","className","onSubmit","placeholder","onChange","map","type","i","step","defaultValue","files"],"sources":["D:/dev/code/java/aptMgrSpringReact/src/main/aptmgrfront/src/components/property/NewPropertyByOwner.js"],"sourcesContent":["import React, { useEffect, useState }  from 'react';\r\nimport axios from \"axios\";\r\nimport '../NewForm.css'\r\nimport '../menu/buttons-small.css';\r\nimport PostService from '../PostService';\r\nimport PostImageService from '../PostImageService';\r\n\r\nconst NewPropertyByOwner = props => {\r\n    const API_URL = \"/properties/owner\";\r\n    const API_IMG_URL = \"/properties/image\";\r\n    const [property, setProperty] = useState({\r\n        title: \"\",\r\n        propertyTypeId: 1,\r\n        buildIn: 1,\r\n        floorsNumb: 1,\r\n        sqrMeters: 1,\r\n        lastPayment: new Date().toISOString().replace('T',' ').substring(0, 19),\r\n        monthlyPaid: false,\r\n    });\r\n    const currDate = new Date().toISOString().replace('T',' ').substring(0, 19);\r\n    const [msg, setMsg] = useState(\"\");\r\n    const config = {\r\n        headers: { Authorization: `Bearer ${props.token}` }\r\n    };\r\n    const [getTypes, setGetTypes] = useState([]);\r\n    const [selectedImage, setSelectedImage] = useState(null);\r\n    const handleChange = (e) => {\r\n        const value = e.target.value;\r\n        setProperty({ ...property, [e.target.name]: value })\r\n    }\r\n\r\n    const changeDate = (e) => {\r\n        const value = e.target.value.replace('T',' ');\r\n        setProperty({ ...property, [e.target.name]: value })\r\n    }\r\n\r\n    const RegisterProperty = (e) => {\r\n        e.preventDefault();\r\n        PostService.saveEntity(API_URL, property, config)\r\n            .then((res) => {\r\n                console.log(\"Property Added Successfully\");\r\n                setMsg(\"Property Added Sucessfully\");\r\n                setProperty({\r\n                    title: \"\",\r\n                    propertyTypeId: 1,\r\n                    buildIn: 1,\r\n                    floorsNumb: 1,\r\n                    sqrMeters: 1,\r\n                    lastPayment: new Date().toISOString().replace('T',' ').substring(0, 19),\r\n                    monthlyPaid: false,\r\n                })\r\n                updateButton();\r\n                UploadSelectedImage(res.data.id);\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n                updateButton();\r\n            });\r\n    }\r\n\r\n    const UploadSelectedImage = (e) => {\r\n        if (selectedImage === null) {\r\n            return;\r\n        }\r\n        const config_img = {\r\n            headers: { Authorization:\r\n                `Bearer ${props.token}`,\r\n                'Content-Type': 'multipart/form-data',\r\n                'X-property-id': e}\r\n        };\r\n        PostImageService.saveEntity(API_IMG_URL, selectedImage, config_img)\r\n            .then(response => {\r\n                console.log(response.data);\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n        });\r\n    };\r\n\r\n    const updateButton = () => {\r\n        props.hide(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        async function fetchTypes(params) {\r\n            const URL = \"/properties/types\";\r\n            try {\r\n                const response = await axios.get(URL,config);\r\n                setGetTypes(\r\n                  response.data,\r\n                );\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        fetchTypes();\r\n    }, []);\r\n\r\n    return(\r\n        <div>\r\n            <div className=\"divborder\">\r\n                {msg && <p>{msg}</p>}\r\n            </div>\r\n            <form className=\"form\" onSubmit={(e) => RegisterProperty(e)}>\r\n                <div className=\"divborder\">\r\n                    <span className=\"title\">add new property</span>\r\n                </div>\r\n                <div>\r\n                    <div className=\"divborder\">\r\n                        <input className='simple-input' placeholder=\"enter property title\" name=\"title\" onChange={(e) => handleChange(e)} value={property.title} />\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <select className='simple-input' name=\"propertyTypeId\" onChange={(e) => handleChange(e)} value={property.propertyTypeId}>\r\n                            {\r\n                            getTypes.map((type,i) =>\r\n                                <option key={i} value={type.id}>{type.type}</option>\r\n                            )};\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <input className='simple-input' placeholder=\"build in\" name=\"buildIn\" onChange={(e) => handleChange(e)} />\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <input className='simple-input' placeholder=\"floors number\" name=\"floorsNumb\" onChange={(e) => handleChange(e)} />\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <input className='simple-input' placeholder=\"sqr meters\" name=\"sqrMeters\" onChange={(e) => handleChange(e)} />\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <input type=\"datetime-local\" name=\"lastPayment\" step=\"1\" defaultValue={currDate} onChange={(e) => changeDate(e)}/>\r\n                    </div>\r\n                    <div className=\"divborder\">\r\n                        <input className='simple-input' type=\"file\" name=\"myImage\" onChange={(e) => {setSelectedImage(e.target.files[0]);}}/>\r\n                    </div>\r\n                    <button className=\"modern-small embossed-link-small\" type=\"submit\">Submit</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NewPropertyByOwner;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}